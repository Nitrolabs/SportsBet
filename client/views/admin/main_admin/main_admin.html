<template name="MainAdmin">
{{#ionView class="admin" }}
{{#ionContent overflow-scroll=true }}
    <!--{{#if currentUser}}-->
        {{#if LoggingIn}}
            Loading...
        {{else}}
            
            <div name="main_admin_div" class="main">
                
                <div class="col-lg-4">
                    <div class="row">
                        <div class="alert alert-info" name="GameName">
                            <h4>{{getActiveGameName}}</h4>
                            <a href="{{pathFor 'games.mgmt'}}" class='btn btn-primary'>Games Management</a>
                        </div>
                    </div>
                    <div name="ListOfBetsForGame" class="well">
                        <div>
                            <button class="btn btn-sm btn-primary" name='filterByStatus' data-filter-string="">All</button>
                            <button class="btn btn-sm btn-success" name='filterByStatus' data-filter-string="ACTIVE">Active</button>
                            <button class="btn btn-sm btn-warning" name='filterByStatus' data-filter-string="CLOSED">Closed</button>
                            <button class="btn btn-sm btn-default" name='filterByStatus' data-filter-string="HIDDEN">Hidden</button>
                            <button class="btn btn-sm btn-info" name='filterByStatus' data-filter-string="RESOLVED">Resolved</button>
                                
                        </div>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>
                                            <h4>Status</h4>
                                        </th>
                                        <!--<th>-->
                                        <!--    <h4>Date/Time</h4>-->
                                        <!--</th>-->
                                        <th>
                                            <h4 >Title</h4>
                                        </th>
                                        <!--<th>-->
                                        <!--    <h4 >...</h4>-->
                                        <!--</th>-->
                                    </tr>
                                </thead>
                                <tbody>
                                    {{#each betsForThisGame}}
                                    <tr>
                                        <td style="vertical-align:middle;padding:0px;">
                                            <span style="margin-top: 3px;margin-bottom: 3px;" class="label label-{{getStatusLabelType status}}">{{status}}</span>
                                        </td>
                                        <!--<td style="vertical-align:middle;padding:0px;">-->
                                        <!--    <p style="margin-top: 3px;margin-bottom: 3px;">{{prettifyDate submitted_at}}</p>-->
                                        <!--</td>-->
                                        <td style="vertical-align:middle;padding:0px;">
                                            <p style="margin-top: 3px;margin-bottom: 3px;"><a href="#" name="selectActiveBet">{{title}}</a></p>
                                        </td>
                                        <!--<td style="vertical-align:middle;padding:0px;">-->
                                        <!--    <p style="margin-top: 3px;margin-bottom: 3px;">...</p>-->
                                        <!--</td>-->
                                    </tr>
                                    {{/each}}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8" name="AdmitActiveBetArea">
                <div class="row">
                    <div class="btn-group">
                          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                            New <span class="caret"></span>
                          </button>
                          <ul class="dropdown-menu" role="menu">
                            <li><a href="#" data-sel-idx="0" name="newBetButton">BLANK</a></li>
                            <li class="divider"></li>
                            <!--<li><a href="#" data-sel-idx="1" name="newBetButton">Next Drive # of Plays</a></li>-->
                            <!--<li><a href="#" data-sel-idx="2" name="newBetButton">Next Drive Result</a></li>-->
                            <!--<li><a href="#" data-sel-idx="3" name="newBetButton">Kickoff Position</a></li>-->
                            <!--<li><a href="#" data-sel-idx="4" name="newBetButton">Score on Drive</a></li>-->
                            <!--<li><a href="#" data-sel-idx="5" name="newBetButton">Points Scored in Quarter</a></li>-->
                            <!--<li><a href="#" data-sel-idx="1" name="newBetButton">Next FT</a></li>-->
                            <!--<li><a href="#" data-sel-idx="2" name="newBetButton">Buzzer beater</a></li>-->
                            <!--<li><a href="#" data-sel-idx="3" name="newBetButton">Lebron dunk</a></li>-->
                            <!--<li><a href="#" data-sel-idx="4" name="newBetButton">Bosh QTR</a></li>-->
                            <!--<li><a href="#" data-sel-idx="5" name="newBetButton">Beer choice</a></li>-->
                            <!--<li><a href="#" data-sel-idx="6" name="newBetButton">Beer specific</a></li>-->
                            <!--<li><a href="#" data-sel-idx="7" name="newBetButton">Love 3 QTR</a></li>-->
                            <!--<li><a href="#" data-sel-idx="8" name="newBetButton">Replay</a></li>-->
                            <!--<li><a href="#" data-sel-idx="9" name="newBetButton">After 2min mark</a></li>-->

    <!--<li><a href="#" data-sel-idx="1" name="newBetButton">Nastic score half</a></li>-->
    <!--<li><a href="#" data-sel-idx="2" name="newBetButton">3-pt brown half</a></li>-->
    <!--<li><a href="#" data-sel-idx="3" name="newBetButton">Technical foul half</a></li>-->
    <!--<li><a href="#" data-sel-idx="4" name="newBetButton">Randle % half</a></li>-->
    <!--<li><a href="#" data-sel-idx="5" name="newBetButton">airball half</a></li>-->
    <!--<li><a href="#" data-sel-idx="6" name="newBetButton">Brown total stats half</a></li>-->
    <!--<li><a href="#" data-sel-idx="7" name="newBetButton">Nastic total stats half</a></li>-->
    <!--<li><a href="#" data-sel-idx="8" name="newBetButton">Play after 14 min</a></li>-->
    <!--<li><a href="#" data-sel-idx="9" name="newBetButton">Scores first after TO</a></li>-->
    <!--<li><a href="#" data-sel-idx="10" name="newBetButton">FREE THROWS</a></li>-->
    <!--<li><a href="#" data-sel-idx="11" name="newBetButton">Stanford next shot</a></li>-->
    <!--<li><a href="#" data-sel-idx="12" name="newBetButton">Oregon next shot</a></li>-->
    <!--<li><a href="#" data-sel-idx="13" name="newBetButton">Event first</a></li>-->
<li><a href="#" data-sel-idx="1" name="newBetButton">After Timeout</a></li>
<li><a href="#" data-sel-idx="2" name="newBetButton">Next 3-pointer</a></li>
<li><a href="#" data-sel-idx="3" name="newBetButton">Next score</a></li>
<li><a href="#" data-sel-idx="4" name="newBetButton">Free throws</a></li>
<li><a href="#" data-sel-idx="5" name="newBetButton">Oregon next points</a></li>
<li><a href="#" data-sel-idx="6" name="newBetButton">Utah next point</a></li>
<li><a href="#" data-sel-idx="7" name="newBetButton">After X min mark</a></li>
<li><a href="#" data-sel-idx="8" name="newBetButton">Next dunk</a></li>
<li><a href="#" data-sel-idx="9" name="newBetButton">Last second shot</a></li>
<li><a href="#" data-sel-idx="10" name="newBetButton">Foul out of TO</a></li>
<li><a href="#" data-sel-idx="11" name="newBetButton">Next foul</a></li>

                            
                          </ul>
                        </div>
                </div>
                {{#with getActiveBet}}
                <form id="bet_form">
                    <div class="well">
                        <table>
                            <tr><td>ID: </td><td>{{_id}}</td></tr>
                            <tr><td>Status:   </td><td><b>{{status}}</b></td></tr>
                            <tr></tr>
                            <tr><td>Title: </td><td><input type="text" id="bet_title" value="{{title}}"/></td></tr>
                            <tr><td>Question: </td><td><textarea name="active_bet_question" id=active_bet_question rows="3" cols="60">{{question}}</textarea></td></tr>
                            <tr></tr>
                            <tr><td>Option 1:</td><td>
                                <input size="50" type="text" name="option1_text" id="option1_text" value="{{getOutcomeData 0 'text'}}"/>&nbsp; &nbsp; &nbsp; <input type="text" name="option1_odds" size="4" id="option1_odds" value="{{getOutcomeData 0 'odds'}}" /> : 1
                            </td></tr>
                            <tr><td>Option 2:</td><td>
                                <input size="50" type="text" name="option2_text" id="option2_text" value="{{getOutcomeData 1 'text'}}"/>&nbsp; &nbsp; &nbsp; <input type="text" name="option2_odds" size="4" id="option2_odds" value="{{getOutcomeData 1 'odds'}}" /> : 1
                            </td></tr>
                            <tr><td>Option 3:</td><td>
                                <input size="50" type="text" name="option3_text" id="option3_text" value="{{getOutcomeData 2 'text'}}"/>&nbsp; &nbsp; &nbsp; <input type="text" name="option3_odds" size="4" id="option3_odds" value="{{getOutcomeData 2 'odds'}}" /> : 1
                            </td></tr>
                            <tr><td>Option 4:</td><td>
                                <input size="50" type="text" name="option4_text" id="option4_text" value="{{getOutcomeData 3 'text'}}"/>&nbsp; &nbsp; &nbsp; <input type="text" name="option4_odds" size="4" id="option4_odds" value="{{getOutcomeData 3 'odds'}}" /> : 1
                            </td></tr>
                            <tr></tr>
                            <tr><td>Actual Result:</td><td>
                                <input size="10" type="text" name="actual_result" id="actual_result" value="{{actual_result}}"/>
                            </td></tr>
                            <tr><td>Status update:</td><td>
                                <input type="text" name="status_update" id="status_update" value="{{status_update}}" />
                            </td></tr>
                            <tr></tr>
                            <tr><td>Submitted at:</td><td><b>{{prettifyDate submitted_at}}</b></td></tr>
                            <tr><td>Activated at: </td><td><b>{{prettifyDate activated_at}}</b> </td></tr>
                            <tr><td>Auto-close at: </td><td><b>{{prettifyDate auto_close_at}}</b> </td></tr>
                            <tr><td>Closed at: </td><td><b>{{prettifyDate closed_at}}</b> </td></tr>
                            <tr><td>Resolved at: </td><td><b>{{prettifyDate resolved_at}}</b> </td></tr>
                        </table>     
                        
                        <br>
                        <div class="row">
                            {{#if isNewBet}}
                                <button class="btn btn-primary" id="createNewBet">Create</button>
                                <br>
                            {{else}}
                                {{#unless isEq status "RESOLVED"}}
                                <button class="btn btn-default" id="saveBet">Save</button>
                                {{/unless}}
                                {{#if isEq status "HIDDEN"}}
                                <button class="btn btn-success" id="activateBet">Activate</button>
                                <div class="btn-group" data-toggle="buttons">
                                  <label class="btn btn-primary active">
                                    <input type="radio" name="auto_close_options" autocomplete="off" data-auto-close-time="0" checked> Open
                                  </label>
                                  <label class="btn btn-primary">
                                    <input type="radio" name="auto_close_options" autocomplete="off" data-auto-close-time="15"> 15s
                                  </label>
                                  <label class="btn btn-primary">
                                    <input type="radio" name="auto_close_options" autocomplete="off" data-auto-close-time="20"> 20s
                                  </label>
                                  <label class="btn btn-primary">
                                    <input type="radio" name="auto_close_options" autocomplete="off" data-auto-close-time="30"> 30s
                                  </label>
                                  <label class="btn btn-primary">
                                    <input type="radio" name="auto_close_options" autocomplete="off" data-auto-close-time="60"> 60s
                                  </label>
                                  <label class="btn btn-primary">
                                    <input type="radio" name="auto_close_options" autocomplete="off" data-auto-close-time="300"> 5min
                                  </label>
                                  <label class="btn btn-primary">
                                    <input type="radio" name="auto_close_options" autocomplete="off" data-auto-close-time="-1"> Custom
                                  </label>
                                  <input type="text" id="custom_close_time" />
                                </div>
                                {{/if}}
                                {{#if isEq status "ACTIVE"}}
                                <button class="btn btn-warning" id="closeBet">Close</button>
                                {{/if}}
                                {{#if isEq status "CLOSED"}}
                                <button class="btn btn-info" id="resolveBet">Resolve</button>
                                {{/if}}
                                {{#if isEq status "RESOLVED"}}
                                    {{#if statistics}}
                                        <b>{{statistics.numberOfWinners}} / {{statistics.numberOfBets}}&nbsp;&nbsp;&nbsp; {{statistics.house_profit}}$&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b>
                                    {{/if}}
                                    Bet is resolved and cannot be changed<br>
                                {{/if}}
                                
                                <br>
                            {{/if}}
                            
                        </div>
                    </div>
                </form>
                {{/with}}
                </div>
                
            </div>
            
        {{/if}}
    <!--{{else}}-->
    <div class="row">
        No user
        {{> loginButtons}}
    </div>
    <!--{{/if}}-->
{{/ionContent}}
{{/ionView}}
</template>