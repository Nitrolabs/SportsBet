<template name="MobileGame">

  {{#contentFor "headerButtonLeft"}}
    {{>ionNavBackButton class="button-positive" text=false}}
  {{/contentFor}}

  {{#contentFor "headerButtonRight"}}
    <button class="button button-clear pull-right button-positive" data-action="share-product" data-product-id="{{product._id}}">
      {{> ionIcon icon='navicon'}}
    </button>
  {{/contentFor}}

  {{#contentFor "headerTitle"}}
    <h1 class="title">{{ game.title }}</h1>
  {{/contentFor}}

  {{#ionView}}
    {{#ionContent}}

    
 	{{#with current_bet }}
 		{{#if is_user_bankrupt }}
	 		<button id="buy-chips-button" class="button button-balanced">
	 	 		<p>Buy More Credits</p>
			</button>
		{{ else }}
			<button id="bet-amount-button" class="button button-energized">
	 	 		<p class="bet-amount-value">{{ formatted_bet_amount }}</p>
	 	 		<p class="bet-amount-label">Bet amount</p>
			</button>
		{{/if}}
	
 		<div class="card">
		  <div class="item item-divider">
		    {{#if question}}
		        {{ question }}
		    {{else}}
		        Waiting for the next avilable bet... <br>
		        In the mean time, check the leaderboard below! :)
		    {{/if}}
		  </div>
		  <div class="item item-text-wrap">
		  {{#if status }} <!-- crude way to check whether there's a status, i.e. there's a bet-->
		  	  {{#each addIndexesToArray outcomes }}
		  	    {{#if notEmptyString text}}
			  	<div class="item item-divider bet-option-button" data-index-for-ref="{{index_for_ref}}">
			  		{{ text }}
			  		<p class='clearfix'>
			  			<span class='pull-left'>{{ odds }}:1</span>
			  			<span class='pull-right'>{{ formatted_win_value }}</span>
			  		</p>
				</div>
				{{/if}}
			  {{/each}}
			  <br>
			  <a href="#" class='bet-skip-button'>skip</a>
			  <br>
		    {{else}} <!--  No current bet-->
	            <h4>Nothing to bet on at the moment...</h4>
	            <!--TODO: add a leaderboard here-->
	        {{/if}}
		    </div>
		</div> <!-- END QUESTION -->

        
		<div>
			<div class="text-center">
			  <br>
			  <div class="bet-user-bank">  	
			  	<h2>
			  		{{ formatted_bank_account }}
			  	</h2>
			  </div>
			  <div class="bet-ongoing-stats">
			  	 <p>{{ number_bets }} bets (${{ value_bets}}) still on the table!</p>
			  </div>
			  <div class="bet-status-message">
			  	<!-- ASSAF: I REALLY DON"T KNOW HOW TO UPDATE THE STATUS MESSAGE -->
			  	<p>{{ status_message }} We are going to put the status message here</p>
			  </div>
		  </div>
		</div>
	{{/with}}
	
    {{/ionContent}}
  {{/ionView}}
</template>
